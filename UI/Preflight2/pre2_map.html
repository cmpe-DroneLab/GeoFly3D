<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_6b19c5448d6658c066948d57c01f4f12 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css"/>
    <script src="https://cdn.jsdelivr.net/gh/ardhi/Leaflet.MousePosition/src/L.Control.MousePosition.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ardhi/Leaflet.MousePosition/src/L.Control.MousePosition.min.css"/>
</head>
<body>
    
    
            <div class="folium-map" id="map_6b19c5448d6658c066948d57c01f4f12" ></div>
        
</body>
<script>
    
    
            var map_6b19c5448d6658c066948d57c01f4f12 = L.map(
                "map_6b19c5448d6658c066948d57c01f4f12",
                {
                    center: [41.0854778, 29.040432199999998],
                    crs: L.CRS.EPSG3857,
                    zoom: 10,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            L.control.scale().addTo(map_6b19c5448d6658c066948d57c01f4f12);

            

        
    
            var tile_layer_1513062a0c3f7f97b1e83070f45cd9f5 = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {"attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors", "detectRetina": false, "maxNativeZoom": 19, "maxZoom": 19, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            );
        
    
            tile_layer_1513062a0c3f7f97b1e83070f45cd9f5.addTo(map_6b19c5448d6658c066948d57c01f4f12);
        
    
            var options = {
              position: "topleft",
              draw: {"circle": false, "circlemarker": false, "marker": false, "polygone": true, "polyline": false, "rectangle": true},
              edit: {},
            }
                       
            // FeatureGroup is to store editable layers.
            var drawnItems_draw_control_26e18c7bed2a8f6aa31068f0a75b64bd = new L.featureGroup().addTo(
                map_6b19c5448d6658c066948d57c01f4f12
            );
            
            options.edit.featureGroup = drawnItems_draw_control_26e18c7bed2a8f6aa31068f0a75b64bd;
            var draw_control_26e18c7bed2a8f6aa31068f0a75b64bd = new L.Control.Draw(
                options
            ).addTo( map_6b19c5448d6658c066948d57c01f4f12 );
            

            // Listen for the event triggered when a new shape is created
            map_6b19c5448d6658c066948d57c01f4f12.on(L.Draw.Event.CREATED, function(e) {
                // Get the created layer and its type
                var layer = e.layer,
                    type = e.layerType;
                // Obtain the coordinates of the layer in GeoJSON format
                var coords = JSON.stringify(layer.toGeoJSON());

                // Check if the shape is convex or not by obtaining its coordinates
                var pcoords = JSON.parse(coords).geometry.coordinates[0];
                var is_convex = isPolygonConvex(pcoords);
                if (is_convex) {
                    // If the shape is convex, log the coordinates to the console
                    console.log(coords);
                    // Clear all previously drawn shapes and add the new shape
                    drawnItems_draw_control_26e18c7bed2a8f6aa31068f0a75b64bd.clearLayers();
                    drawnItems_draw_control_26e18c7bed2a8f6aa31068f0a75b64bd.addLayer(layer);
                } else {
                    // If the shape is not convex, show a warning message to the user
                    alert("The polygon is not convex!")
                    // Enable editing mode (to edit the shape)
                    e.target.editing.enable();
                }
            });
            
            
            // Listen for the event triggered when drawing starts
            map_6b19c5448d6658c066948d57c01f4f12.on(L.Draw.Event.DRAWSTART, function(e) {
                // Clear all previously drawn shapes when drawing starts
                drawnItems_draw_control_26e18c7bed2a8f6aa31068f0a75b64bd.clearLayers();
            });

            
            
            // Listen for the event triggered when shapes are deleted
            map_6b19c5448d6658c066948d57c01f4f12.on(L.Draw.Event.DELETED, function(e) {
                // Log a message to the console when shapes are deleted
                console.log("drawings deleted");
            });

        

            // Listen for the event triggered when shapes are edited
            map_6b19c5448d6658c066948d57c01f4f12.on('draw:edited', function(e) {
                // Iterate over each edited layer
                e.layers.eachLayer(function (layer) {
                    // Get the coordinates of the layer in GeoJSON format
                    var coords = JSON.stringify(layer.toGeoJSON());
            
                    // Extract the coordinates of the polygon
                    var pcoords = JSON.parse(coords).geometry.coordinates[0];
                    // Check if the polygon is convex
                    var is_convex = isPolygonConvex(pcoords);
                    if (is_convex) {
                        // If the polygon is convex, log the coordinates to the console
                        console.log(coords);
                    } else {
                        // If the polygon is not convex, show a warning message to the user
                        alert("The polygon is not convex!");
                        // Enable editing mode (to edit the polygon)
                        e.target.editing.enable();
                    }
                });
            });


            


    function isClosed(coords) {
        for (let coord in coords) {
            if (coords[coord].length !== 2) {
                return false;
            }

        }
        return true;
    }


    function isPolygonConvex(coords) {

        let coords_length = coords.length;
        if(coords_length < 4)
            return false;

        if (!this.isClosed(coords))
            return false;

        let prev_dir = 0;
        let curr_dir = 0;

        for (let i = 0; i < coords_length; i++) {

            curr_dir = crossProduct(coords[i],
                coords[(i + 1) % coords_length],
                coords[(i + 2) % coords_length]);

            if (curr_dir !== 0) {

                if (curr_dir * prev_dir < 0) {
                    return false;
                } else {
                    prev_dir = curr_dir;
                }
            }
        }
        return true;

    }

    function crossProduct(p1, p2, p3) {
        return (p2[0] - p1[0]) * (p3[1] - p1[1]) - (p2[1] - p1[1]) * (p3[0] - p1[0]);
    }

        
    
            var mouse_position_f85a09057f1ff3a88cb29a04919c46a4 = new L.Control.MousePosition(
                {"emptyString": "NaN", "lngFirst": false, "numDigits": 5, "position": "topright", "prefix": "", "separator": " | "}
            );
            mouse_position_f85a09057f1ff3a88cb29a04919c46a4.options["latFormatter"] =
                undefined;
            mouse_position_f85a09057f1ff3a88cb29a04919c46a4.options["lngFormatter"] =
                undefined;
            map_6b19c5448d6658c066948d57c01f4f12.addControl(mouse_position_f85a09057f1ff3a88cb29a04919c46a4);
        
    
            tile_layer_1513062a0c3f7f97b1e83070f45cd9f5.addTo(map_6b19c5448d6658c066948d57c01f4f12);
        
    
            var feature_group_f23127edc8a45c20501e3aa83f7f75fc = L.featureGroup(
                {}
            );
        
    
            var polygon_41f5c2dc67911035f93ebd1dcfd5da6a = L.polygon(
                [[41.085321, 29.040092], [41.085839, 29.040256], [41.085714, 29.040945], [41.085194, 29.040776], [41.085321, 29.040092]],
                {"bubblingMouseEvents": true, "color": "#3388ff", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "red", "fillOpacity": 0.1, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "noClip": false, "opacity": 1.0, "smoothFactor": 1.0, "stroke": true, "weight": 0}
            ).addTo(feature_group_f23127edc8a45c20501e3aa83f7f75fc);
        
    
            feature_group_f23127edc8a45c20501e3aa83f7f75fc.addTo(map_6b19c5448d6658c066948d57c01f4f12);
        
    
            var feature_group_0cc6cd805c01568e1b8fb4a16f992f3c = L.featureGroup(
                {}
            );
        
    
            var marker_b8557d2973bb77b0ec75aa5e131fba2a = L.marker(
                [41.085838991252395, 29.04025599723049],
                {}
            ).addTo(feature_group_0cc6cd805c01568e1b8fb4a16f992f3c);
        
    
            var icon_1d373035c567fbd8eb8229ce36bba92f = L.AwesomeMarkers.icon(
                {"extraClasses": "fa-rotate-0", "icon": "play", "iconColor": "white", "markerColor": "darkgreen", "prefix": "glyphicon"}
            );
            marker_b8557d2973bb77b0ec75aa5e131fba2a.setIcon(icon_1d373035c567fbd8eb8229ce36bba92f);
        
    
            marker_b8557d2973bb77b0ec75aa5e131fba2a.bindTooltip(
                `<div>
                     Starting point of Optimal Route
                 </div>`,
                {"sticky": true}
            );
        
    
            var marker_0ce4e668b23bfb870fcaa8df428c8f3c = L.marker(
                [41.0853513355912, 29.04010160431845],
                {}
            ).addTo(feature_group_0cc6cd805c01568e1b8fb4a16f992f3c);
        
    
            var icon_d5b84c4f7192c8657ef5112af53f416b = L.AwesomeMarkers.icon(
                {"extraClasses": "fa-rotate-0", "icon": "stop", "iconColor": "white", "markerColor": "darkgreen", "prefix": "glyphicon"}
            );
            marker_0ce4e668b23bfb870fcaa8df428c8f3c.setIcon(icon_d5b84c4f7192c8657ef5112af53f416b);
        
    
            marker_0ce4e668b23bfb870fcaa8df428c8f3c.bindTooltip(
                `<div>
                     Ending point of Optimal Route
                 </div>`,
                {"sticky": true}
            );
        
    
            var poly_line_24e3f4d62d2371ee2d33690cfbedeb9d = L.polyline(
                [[41.085838991252395, 29.04025599723049], [41.08571399126498, 29.04094499716112], [41.085659893017336, 29.040927415230634], [41.0857848150559, 29.040238844921173], [41.08573063011424, 29.04022168984312], [41.08560578603711, 29.04090983046206], [41.08555167905931, 29.040892245694273], [41.08567644517504, 29.04020453476584], [41.085622260238274, 29.04018737968934], [41.085497572083945, 29.040874660927283], [41.08544346511103, 29.040857076161082], [41.08556807530396, 29.04017022461361], [41.0855138903721, 29.040153069538658], [41.085389358140546, 29.040839491395676], [41.0853352511725, 29.040821906631063], [41.08545970544269, 29.040135914464482], [41.08540552051572, 29.040118759391078], [41.08528114420689, 29.04080432186724], [41.08522703724372, 29.04078673710421], [41.0853513355912, 29.04010160431845]],
                {"bubblingMouseEvents": true, "color": "darkgreen", "dashArray": null, "dashOffset": null, "fill": false, "fillColor": "darkgreen", "fillOpacity": 0.2, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "noClip": false, "opacity": 0.6, "smoothFactor": 1.0, "stroke": true, "weight": 2}
            ).addTo(feature_group_0cc6cd805c01568e1b8fb4a16f992f3c);
        
    
            feature_group_0cc6cd805c01568e1b8fb4a16f992f3c.addTo(map_6b19c5448d6658c066948d57c01f4f12);
        
    
            var feature_group_0410fb0bb9d1616c1e2aead7cc21d88f = L.featureGroup(
                {}
            );
        
    
            var marker_e2322a98bf5d6d520f4aba2445fe45e6 = L.marker(
                [41.085223847269816, 29.04078570036269],
                {}
            ).addTo(feature_group_0410fb0bb9d1616c1e2aead7cc21d88f);
        
    
            var icon_5439dd007672fb0d8e4b15ed0aa32be1 = L.AwesomeMarkers.icon(
                {"extraClasses": "fa-rotate-0", "icon": "play", "iconColor": "white", "markerColor": "darkred", "prefix": "glyphicon"}
            );
            marker_e2322a98bf5d6d520f4aba2445fe45e6.setIcon(icon_5439dd007672fb0d8e4b15ed0aa32be1);
        
    
            marker_e2322a98bf5d6d520f4aba2445fe45e6.bindTooltip(
                `<div>
                     Starting point of Rotated Route
                 </div>`,
                {"sticky": true}
            );
        
    
            var marker_c88220c41c13afa36c016e261cdbccd6 = L.marker(
                [41.085817484600305, 29.040249188174613],
                {}
            ).addTo(feature_group_0410fb0bb9d1616c1e2aead7cc21d88f);
        
    
            var icon_203fdd1a8bccb497bce06ea57cef6c3d = L.AwesomeMarkers.icon(
                {"extraClasses": "fa-rotate-0", "icon": "stop", "iconColor": "white", "markerColor": "darkred", "prefix": "glyphicon"}
            );
            marker_c88220c41c13afa36c016e261cdbccd6.setIcon(icon_203fdd1a8bccb497bce06ea57cef6c3d);
        
    
            marker_c88220c41c13afa36c016e261cdbccd6.bindTooltip(
                `<div>
                     Ending point of Rotated Route
                 </div>`,
                {"sticky": true}
            );
        
    
            var poly_line_9c360683c7ec116a449c9fbbce30906d = L.polyline(
                [[41.085223847269816, 29.04078570036269], [41.08520866295161, 29.04069702788267], [41.08523838082129, 29.040536972584572], [41.085284339681486, 29.040805360396483], [41.08534483209616, 29.040825020431253], [41.085268098691074, 29.040376917285865], [41.08529781656098, 29.04021686198653], [41.08540532451386, 29.040844680467004], [41.085465816934565, 29.040864340503735], [41.08533428098233, 29.040096204789773], [41.08539468142407, 29.040115327709554], [41.08552630935827, 29.04088400054144], [41.085586801785006, 29.040903660580128], [41.08545508186882, 29.040134450630283], [41.085515482316566, 29.04015357355196], [41.08564729421474, 29.04092332061979], [41.08570778664749, 29.040942980660436], [41.085575882767316, 29.040172696474595], [41.08563628322107, 29.040191819398178], [41.0857403690841, 29.04079965360845], [41.085769756649974, 29.04063766934535], [41.08569668367782, 29.040210942322705], [41.085757084137555, 29.040230065248185], [41.08579914421595, 29.040475685081713], [41.08582853178202, 29.04031370081751], [41.085817484600305, 29.040249188174613]],
                {"bubblingMouseEvents": true, "color": "darkred", "dashArray": null, "dashOffset": null, "fill": false, "fillColor": "darkred", "fillOpacity": 0.2, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "noClip": false, "opacity": 0.6, "smoothFactor": 1.0, "stroke": true, "weight": 2}
            ).addTo(feature_group_0410fb0bb9d1616c1e2aead7cc21d88f);
        
    
            feature_group_0410fb0bb9d1616c1e2aead7cc21d88f.addTo(map_6b19c5448d6658c066948d57c01f4f12);
        
    
            var layer_control_0b613e761c8076834e35ffb81b67c0e6_layers = {
                base_layers : {
                    "openstreetmap" : tile_layer_1513062a0c3f7f97b1e83070f45cd9f5,
                },
                overlays :  {
                    "Selected Area" : feature_group_f23127edc8a45c20501e3aa83f7f75fc,
                    "Optimal Route" : feature_group_0cc6cd805c01568e1b8fb4a16f992f3c,
                    "Rotated Route" : feature_group_0410fb0bb9d1616c1e2aead7cc21d88f,
                },
            };
            let layer_control_0b613e761c8076834e35ffb81b67c0e6 = L.control.layers(
                layer_control_0b613e761c8076834e35ffb81b67c0e6_layers.base_layers,
                layer_control_0b613e761c8076834e35ffb81b67c0e6_layers.overlays,
                {"autoZIndex": true, "collapsed": true, "position": "topright"}
            ).addTo(map_6b19c5448d6658c066948d57c01f4f12);

        
    
            map_6b19c5448d6658c066948d57c01f4f12.fitBounds(
                [[41.085194, 29.040092], [41.085839, 29.040945]],
                {}
            );
        
</script>
</html>